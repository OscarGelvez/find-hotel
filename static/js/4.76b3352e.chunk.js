(this["webpackJsonpreact-redux"]=this["webpackJsonpreact-redux"]||[]).push([[4],{100:function(e,t,a){"use strict";a.d(t,"c",(function(){return k})),a.d(t,"b",(function(){return y})),a.d(t,"a",(function(){return w}));var n=a(80),l=a.n(n),o=a(81),i=a(82),r=a.n(i),c=a(65),m={"Content-Type":"application/json"},s=function(e){return r.a.post("".concat(c.a,"/booking"),e,{headers:m})},d=function(e){return r.a.get("".concat(c.a,"/booking").concat(function(e){var t="";return e&&""!==e.email&&""!==e.identification_type&&""!==e.identification&&(t="?bookData.email=".concat(e.email,"&bookData.identification_type=").concat(e.identification_type,"&bookData.identification=").concat(e.identification)),t}(e)))},u=function(e){return r.a.delete("".concat(c.a,"/booking/").concat(e))},f=a(20),b=a(18),E={message:"",type:""};function v(e){return{type:b.c,payload:e}}function p(e){return{type:b.b,payload:e}}function N(e){return{type:b.a,payload:e}}function g(e){return{type:f.b,payload:e}}function h(e){return{type:f.a,payload:e}}function k(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(g(!0)),t.next=3,s(e).then((function(e){return a(g(!1)),a(h(E)),a(v(e.data.id))})).catch((function(e){return a(g(!1)),a(h({type:"rooms-save-book",message:"Se ha presentado un error al guardar tu reserva. Por favor, intente nuevamente"})),a(v(-1))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function y(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(g(!0)),t.next=3,d(e).then((function(e){return a(g(!1)),a(h(E)),a(p(e.data))})).catch((function(e){return a(g(!1)),a(h({type:"books",message:"Se ha presentado un error al cargar las reservas. Por favor, intente nuevamente"})),a(p([]))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function w(e){return function(){var t=Object(o.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(g(!0)),a((n=e,{type:b.d,payload:n})),t.next=4,u(e).then((function(e){return a(g(!1)),a(h(E)),a(N(0))})).catch((function(e){return a(g(!1)),a(h({type:"books",message:"Se ha presentado un error al cancelar la reserva. Por favor, intente nuevamente"})),a(N(1))}));case 4:case"end":return t.stop()}var n}),t)})));return function(e){return t.apply(this,arguments)}}()}},150:function(e,t,a){"use strict";a.r(t);var n=a(73),l=a(0),o=a(100),i=a(27),r=a(66),c=a(63),m=a(83),s=a(71),d=a(70),u={email:"",identification_type:"",identification:""},f=d.b().shape({email:d.c().email("Email no v\xe1lido").required("Necesitamos tu email"),identification_type:d.c().required("Necesitamos tu tipo de identificaci\xf3n"),identification:d.c().required("Necesitamos tu identificaci\xf3n")}),b=function(e){var t=e.onFindBooking;return l.createElement(l.Fragment,null,l.createElement("div",{"data-testid":"find-bookings",className:"card-rooms"},l.createElement("div",{className:"row"},l.createElement("div",{className:"card filter-area "},l.createElement("h4",{className:"mt-3"},"Encuentra tu reserva"),l.createElement("div",{className:"col"},l.createElement(s.c,{initialValues:u,validationSchema:f,onSubmit:function(e,a){a.resetForm;t({email:e.email,identification_type:e.identification_type,identification:e.identification})}},(function(e){var t=e.errors,a=e.touched;return l.createElement(s.b,{"data-testid":"form-find-bookings"},l.createElement("div",{className:"form-group row mb-3 mt-3"},l.createElement("div",{className:" col-12 col-md-4"},l.createElement("label",{htmlFor:"email",className:"col-12 col-form-label"},"Correo electr\xf3nico*"),l.createElement(s.a,{name:"email","data-testid":"form-bookings-email",type:"email",className:"form-control col-12",placeholder:"eje: joe@email.com"}),t.email&&a.email?l.createElement("small",{className:"text-danger"},t.email):null),l.createElement("div",{className:"col-12 col-md-4"},l.createElement("label",{className:"col-12 col-form-label",htmlFor:"identification_type"},"Tipo de identificaci\xf3n*"),l.createElement(s.a,{as:"select",className:" d-block w-100","data-testid":"form-bookings-identification_type","aria-label":".form-select",id:"identification_type",name:"identification_type"},l.createElement("option",{value:""},"Seleccione"),l.createElement("option",{value:"1"},"C\xe9dula de ciudadan\xeda"),l.createElement("option",{value:"2"},"C\xe9dula de extranjeria"),l.createElement("option",{value:"3"},"Nit"),l.createElement("option",{value:"4"},"Pasaporte")),t.identification_type&&a.identification_type?l.createElement("small",{className:"text-danger"},t.identification_type):null),l.createElement("div",{className:" col-12 col-md-4"},l.createElement("label",{className:"col-12 col-form-label",htmlFor:"identification"},"Identificaci\xf3n*"),l.createElement(s.a,{name:"identification",id:"identification",className:"form-control","data-testid":"form-bookings-identification",placeholder:"eje: 60830147"}),t.identification&&a.identification?l.createElement("small",{className:"text-danger"},t.identification):null)),l.createElement("div",{className:"row"},l.createElement("div",{className:"mt-4 text-center"},l.createElement(m.a,{type:"submit",className:"btn w-75","data-testid":"form-bookings-btn-submit"},"Buscar")),l.createElement("div",{className:"text-center mb-2 mt-1"},l.createElement(m.a,{className:"button-link","data-testid":"form-bookings-btn-reset",type:"reset"},"limpiar"))))})))))))},E=a(99),v=a(74),p=a(68),N=function(e){var t=e.listBookingsFinded,a=e.cancelBooking,n=e.isLoading,o=l.useState(void 0),i=Object(E.a)(o,2),r=i[0],c=i[1],m=function(e){c(e)};return l.createElement(l.Fragment,null,n&&l.createElement(p.a,null),l.createElement("div",{"data-testid":"list-bookings",className:"card-rooms"},l.createElement("div",{className:"row pt-5"},l.createElement("div",{className:"col"},t&&t.length>0?t.map((function(e,t){return l.createElement("div",{"data-testid":"card-information-bookigns",className:"card room-item",key:t},l.createElement("div",{className:"card-header book-item-header "},l.createElement("h3",null,e.roomData.hotel.name)),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12 col-md-6 col-lg-3"},l.createElement("h5",null,"A nombre de:"),l.createElement("span",null,e.bookData.name),l.createElement("h5",{className:"mt-2"},"Ingreso:"),l.createElement("span",null,e.roomData.available_from)),l.createElement("div",{className:"col-12 col-md-6 col-lg-3"},l.createElement("h5",null,"Habitaci\xf3n:"),l.createElement("span",null,e.roomData.title),l.createElement("h5",{className:"mt-2"},"Salida:"),l.createElement("span",null,e.roomData.available_until)),l.createElement("div",{className:"col-12 col-md-6 col-lg-3"},l.createElement("h5",null,"Valor:"),l.createElement("span",null,e.roomData.value),l.createElement("h5",{className:"mt-2"},"Camas:"),l.createElement("span",null,e.roomData.capacity)),l.createElement("div",{className:"col-12 col-md-6 col-lg-3"},l.createElement(g,{detailRoom:r}),l.createElement("button",{type:"button",className:"btn btn-primary btn-book w-100","data-testid":"list-book-btn-detail","data-bs-toggle":"modal","data-bs-target":"#modalDetailBook",onClick:function(){return m(e.roomData)}},l.createElement("i",{className:"fas fa-check ml-3"})," Detalles"),l.createElement("button",{type:"button",className:"btn btn-danger btn-book w-100 mt-3","data-testid":"list-book-btn-cancel","data-bs-toggle":"modal","data-bs-target":"#modalDeleteBook",onClick:function(){return m(e.roomData)}},l.createElement("i",{className:"fas fa-times ml-3"})," Cancelar"),l.createElement(h,{detailRoom:r,confirmDelete:function(){return e.id&&a(e.id)}})))))})):l.createElement("div",{className:"text-center"},l.createElement("h5",null,"No hay reservas para mostrar"))))))},g=function(e){var t=e.detailRoom;return l.createElement(l.Fragment,null,l.createElement("div",{className:"modal fade",id:"modalDetailBook","data-testid":"modal-detail-book","aria-labelledby":"modalDetailBookLabel"},l.createElement("div",{className:"modal-dialog modal-xl"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"modalDetailBookLabel"},"Detalles de tu reserva"),l.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),l.createElement("div",{className:"modal-body"},t&&l.createElement(v.a,{data:t,selectedRoom:t.id}))))))},h=function(e){var t=e.detailRoom,a=e.confirmDelete,n=function(){$("#modalDeleteBook").modal("hide")};return l.createElement(l.Fragment,null,l.createElement("div",{className:"modal fade",id:"modalDeleteBook","data-testid":"modal-book-delete","aria-labelledby":"modalDeleteBookLabel"},l.createElement("div",{className:"modal-dialog modal-xl"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"modalDeleteBookLabel"},"Eliminar reserva"),l.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),l.createElement("div",{className:"modal-body"},t&&l.createElement("h5",null,"\xbfEst\xe1 seguro de cancelar la reserva de ".concat(t.title," en ").concat(t.hotel.name,"?"))),l.createElement("div",{className:"modal-footer"},l.createElement("div",{className:"d-flex justify-content-between w-100"},l.createElement("button",{type:"button",className:"btn btn-secondary w-25","data-testid":"modal-book-delete-no","data-bs-dismiss":"modal"},"No"),l.createElement("button",{type:"button",className:"btn btn-danger w-25","data-testid":"modal-book-delete-cancel",onClick:function(){a(),n()}},"S\xed, cancelar")))))))},k=a(4);function y(){var e=Object(k.a)(["\n  display: flex;\n  width: 100%;\n  flex-wrap: wrap;\n"]);return y=function(){return e},e}var w=a(5).a.div(y()),x=Object(i.b)((function(e){return{listBookingsFinded:e.bookings.listBookings,isLoading:e.main.isLoading,errorMessage:e.main.errorMessage}}),{findBooking:o.b,cancelBooking:o.a})((function(e){var t=e.findBooking,a=e.listBookingsFinded,n=e.cancelBooking,o=e.isLoading,i=e.errorMessage;return l.useEffect((function(){""!==i.message&&"books"===i.type&&c.b.error(i.message)}),[i]),l.createElement(w,{"data-testid":"book"},l.createElement(r.a,null),l.createElement(b,{onFindBooking:t}),l.createElement(N,{listBookingsFinded:a,cancelBooking:n,isLoading:o}))})),F=function(){return l.createElement(n.a,{title:"Reservar",description:"Consulte las reservaciones hechas"},l.createElement(x,null))};F.displayName="HomeMainPage";t.default=F},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n="http://find-hotels-json-server.herokuapp.com"},66:function(e,t,a){"use strict";var n=a(0),l=a(63);t.a=function(){return n.createElement("div",{"data-testid":"toast-error"},n.createElement(l.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}))}},68:function(e,t,a){"use strict";var n=a(0),l=a(69),o=a.n(l);t.a=function(){return n.createElement(n.Fragment,null,n.createElement("div",{"data-testid":"view-spinner",className:"container-loader"},n.createElement("img",{"data-testid":"view-spinner-loader",src:o.a,alt:"loading",className:"img-loader"})))}},69:function(e,t,a){e.exports=a.p+"static/media/loading.890fa681.gif"},73:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(0),l=a(79),o=a(4);function i(){var e=Object(o.a)(["\n  padding-top: 20px;\n  padding-left: 16px;\n  padding-right: 16px;\n"]);return i=function(){return e},e}var r=a(5).a.div(i()),c=function(e){var t=e.children,a=e.title,o=e.description;return n.createElement(n.Fragment,null,n.createElement(l.a,null,a&&n.createElement("title",null,"Find hotel | ",a),o&&n.createElement("meta",{name:"description",content:o})),n.createElement(r,{"data-testid":"layout"},t))}},74:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(71),l=a(0),o=a(70),i=function(e){var t=e.label,a=e.icon,n=e.value,o=e.valueText,i=void 0!==n&&!0===n;return l.createElement(l.Fragment,null,l.createElement("h6",{"data-testid":"custom-field",className:"font-weight-bold"},t," ",l.createElement("i",{className:"fas ".concat(a)})," :"," ",o&&""!==o?l.createElement("span",{"data-testid":"custom-field-value-text"},o):l.createElement("i",{className:"fas fa-".concat(i?"check":"times"),"data-testid":"custom-field-value-".concat(i?"true":"false")})))},r=a(16),c=function(e){var t=e.data,a=e.loadDetailRoom,n=e.selectedRoom,o=e.saveBookingRoom;return l.createElement("div",{"data-testid":"card-information",className:"card room-item"},l.createElement("div",{className:"card-header room-item-header "},l.createElement("h3",null,t.hotel.name),l.createElement("h4",null,t.hotel.score)),l.createElement("div",{className:"card-body"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-md-4"},l.createElement("img",{src:t.image,className:"img-fluid",alt:"hotel room",width:"260px",height:"180px"})),l.createElement("div",{className:"col col-md-8"},l.createElement("div",{className:"row"},l.createElement("div",{className:"col-12 col-lg-8"},l.createElement("h5",{className:"card-title"},t.title)),l.createElement("div",{className:"col-12 col-lg-4"},o&&n&&-1!==n?l.createElement(l.Fragment,null,l.createElement("button",{type:"button",className:"btn btn-primary btn-book w-100","data-testid":"form-detail-button-book","data-bs-toggle":"modal","data-bs-target":"#modalFormBook",id:"form-detail-button"},l.createElement("i",{className:"far fa-calendar-check ml-3"})," Reservar"),l.createElement(d,{saveBookingRoom:o,dataRoom:t})):a&&l.createElement(r.a,{to:"/rooms/detail"},l.createElement("button",{type:"button",id:"btn-select-detail",className:"btn btn-primary btn-book w-100","data-testid":"form-button-load-detail",onClick:function(){return a&&a(t.id)}},l.createElement("i",{className:"far fa-calendar-check ml-3"})," Seleccionar"))),l.createElement("div",{className:"col-12 col-md-12"},l.createElement("h4",null,l.createElement("i",{className:"far fa-money-bill-alt"})," ",t.value)),l.createElement("div",{className:"col-12 col-md-12 d-flex"},l.createElement(i,{label:"Inicio",icon:"fa-calendar-alt",valueText:t.available_from}),l.createElement(i,{label:"-  Fin",icon:"fa-calendar-alt",valueText:t.available_until}))),l.createElement("p",{className:"card-text"},t.description),n&&-1!==n&&l.createElement("div",{className:"mb-3","data-testid":"form-field-hotel-desc"},l.createElement("p",{className:"card-text"},t.hotel.description),l.createElement(i,{label:"Direcci\xf3n",icon:"fa-map-marked-alt",valueText:"".concat(t.hotel.address)})),l.createElement("div",{className:"row"},l.createElement("div",{className:"col col-md-6"},l.createElement(i,{label:"Camas",icon:"fa-bed",valueText:"".concat(t.capacity)}),l.createElement(i,{label:"Aire",icon:"fa-wind",value:"Y"===t.ac}),l.createElement(i,{label:"Wifi",icon:"fa-wifi",value:"Y"===t.wifi})),l.createElement("div",{className:"col col-md-6"},l.createElement(i,{label:"Parqueadero",icon:"fa-car",value:"Y"===t.parking}),l.createElement(i,{label:"Ba\xf1os",icon:"fa-restroom",value:!0}),n&&-1!==n&&l.createElement(u,{score:t.hotel.stars})))))))},m={name:"",email:"",identification_type:"",identification:""},s=o.b().shape({name:o.c().min(2,"Nombre muy corto").max(50,"Nombre muy largo").required("Nacesitamos tu nombre"),email:o.c().email("Email no v\xe1lido").required("Necesitamos tu email"),identification_type:o.c().required("Necesitamos tu tipo de identificaci\xf3n"),identification:o.c().required("Necesitamos tu identificaci\xf3n")}),d=function(e){var t=e.saveBookingRoom,a=e.dataRoom,o=function(){$("#modalFormBook").modal("hide")};return l.createElement(l.Fragment,null,l.createElement("div",{"data-testid":"modal-form-book"},l.createElement("div",{className:"modal fade",id:"modalFormBook","aria-labelledby":"modalFormBookLabel","data-testid":"modal-book"},l.createElement("div",{className:"modal-dialog"},l.createElement("div",{className:"modal-content"},l.createElement("div",{className:"modal-header"},l.createElement("h5",{className:"modal-title",id:"modalFormBookLabel"},"Completa tu reserva"),l.createElement("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})),l.createElement("div",{className:"modal-body"},l.createElement(n.c,{initialValues:m,validationSchema:s,onSubmit:function(e,n){var l=n.resetForm;t&&t({bookData:{name:e.name,email:e.email,identification_type:e.identification_type,identification:e.identification},roomData:a}),o(),l()}},(function(e){var t=e.errors,a=e.touched;return l.createElement(n.b,{"data-testid":"modal-book-form",id:"form-modal-book"},l.createElement("div",{className:"row mb-3"},l.createElement("div",{className:"col-12 col-md-6 "},l.createElement("label",{htmlFor:"name",className:"col-12 col-form-label"},"Nombre"),l.createElement(n.a,{name:"name",className:"form-control col-12",placeholder:"eje: Joe Doe","data-testid":"modal-book-form-name",id:"book-form-name"}),t.name&&a.name?l.createElement("small",{className:"text-danger"},t.name):null),l.createElement("div",{className:" col-12 col-md-6"},l.createElement("label",{htmlFor:"email",className:"col-12 col-form-label"},"Correo electr\xf3nico"),l.createElement(n.a,{name:"email",type:"email",className:"form-control col-12","data-testid":"modal-book-form-email",placeholder:"eje: joe@email.com",id:"book-form-email"}),t.email&&a.email?l.createElement("small",{className:"text-danger"},t.email):null)),l.createElement("div",{className:"row mb-2"},l.createElement("div",{className:"col-12 col-md-6 "},l.createElement("label",{className:"pr-2",htmlFor:"identification_type"},"Tipo de identificaci\xf3n"),l.createElement(n.a,{as:"select",className:" d-block w-100","aria-label":".form-select-sm example",name:"identification_type","data-testid":"modal-book-form-identification-type",id:"book-form-select"},l.createElement("option",{value:""},"Seleccione"),l.createElement("option",{value:"1"},"C\xe9dula de ciudadan\xeda"),l.createElement("option",{value:"2"},"C\xe9dula de extranjeria"),l.createElement("option",{value:"3"},"Nit"),l.createElement("option",{value:"4"},"Pasaporte")),t.identification_type&&a.identification_type?l.createElement("small",{className:"text-danger"},t.identification_type):null),l.createElement("div",{className:" col-12 col-md-6"},l.createElement("label",{className:"pr-2",htmlFor:"identification"},"Identificaci\xf3n"),l.createElement(n.a,{name:"identification",className:"form-control",placeholder:"eje: 60830147","data-testid":"modal-book-form-identification",id:"book-form-identification"}),t.identification&&a.identification?l.createElement("small",{className:"text-danger"},t.identification):null)),l.createElement("div",{className:"d-flex justify-content-between mt-3"},l.createElement("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal","data-testid":"modal-book-form-btn-cancel",id:"modal-form-btn-cancel"},"Cancelar"),l.createElement("button",{type:"submit",className:"btn btn-primary","data-testid":"modal-book-form-btn-submit",id:"modal-form-btn-submit"},"Finalizar")))}))))))))},u=function(e){var t=e.score,a=new Array(t);return a.fill("star",0),l.createElement(l.Fragment,null,l.createElement("div",{"data-testid":"star-score"},t&&a.map((function(e,t){return l.createElement("i",{key:t,className:"fas fa-star"})}))))}},83:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(4);function l(){var e=Object(n.a)(["\n  background: #ffea00;\n  border-radius: 10px;\n  color: #000;\n  height: auto;\n  font-weight: 700;\n  text-align: center;\n  &[disabled] {\n    opacity: 0.3;\n  }\n"]);return l=function(){return e},e}var o=a(5).a.button(l())},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(29);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],n=!0,l=!1,o=void 0;try{for(var i,r=e[Symbol.iterator]();!(n=(i=r.next()).done)&&(a.push(i.value),!t||a.length!==t);n=!0);}catch(c){l=!0,o=c}finally{try{n||null==r.return||r.return()}finally{if(l)throw o}}return a}}(e,t)||Object(n.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}}}]);
//# sourceMappingURL=4.76b3352e.chunk.js.map